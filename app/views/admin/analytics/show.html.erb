<div class="container">
    <div class="row">
        <div class="col-xs-12">
          <h1>Analytics Dashboard</h1>
          <p>Explore adoption metrics below</p>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3">
          <div class="panel panel-success">
            <div class="panel-heading">
              <h3 class="panel-title"><strong>User with most Orders</strong></h3>
            </div>
            <div class="panel-body">
              <%= @users.user_with_most_orders %>
            </div>
          </div>
        </div>


        <div class="col-md-3">
          <div class="panel panel-danger">
            <div class="panel-heading">
              <h3 class="panel-title"><strong>Priciest Dog by Category</strong></h3>
            </div>
            <div class="panel-body">

              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Category</th>
                    <th scope="col">Number</th>
                  </tr>
                </thead>
                <tbody>
                  <% @categories.each do |category| %>
                  <tr>
                    <td><%= category.title %></td>
                    <td><%= category.orders_by_category %></td>
                  </tr>
                  <% end %>
                </tbody>
              </table>

            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title"><strong>Retired Dogs</strong></h3>
            </div>
            <div class="panel-body">
                <div>

                  <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Retired?</th>
                        <th scope="col">Count</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% @dogs.each do |dog| %>
                        <tr>
                          <% if dog.retired_count > 0 %>
                            <td><%= dog.name %></td>
                            <td><%= dog.retired %></td>
                            <td><%= dog.retired_count %></td>
                          <% end %>
                        </tr>
                      <% end %>
                    </tbody>
                  </table>

                </div>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="panel panel-warning">
            <div class="panel-heading">
                <h3 class="panel-title"><strong>Completed Orders by State</strong></h3>
            </div>
            <div class="panel-body">

              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">State</th>
                    <th scope="col"><%= link_to "Count", admin_analytics_dashboard_path(:sort => "count"), method: :get %></th>
                  </tr>
                </thead>
                <tbody>
                  <% @orders.each do |state, count| %>
                    <tr>
                      <td><%= state %></td>
                      <td><%= count %></td>
                    </tr>
                    <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
    </div>
</div>
